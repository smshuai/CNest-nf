params {
    project = false
    bed = false
    ref = false
    design = false
    skip_lines = 0
    test = false
    index = false
    indexb = false
    bindir = false
    binlist = false
    rbindir = false
    cordir = false
    gender = false
    cov = false
    batch = false
    help = false
    samples = false
    wgs = false
    maxRetries = 10
    errorStrategy = { task.attempt <= params.maxRetries ? "retry" : "ignore" }
    queueSize = 1000
    maxForks = 45
    cpus = 1
    memory = "2.GB"
    disk = "100.GB"
    container = "public.ecr.aws/i8u7l4w6/lifebitai/cnest:dev2_bash"
}

executor {
  $slurm {
      queueSize = params.queueSize
      pollInterval = '30sec'
      submitRateLimit = '100 sec'
  }

  $lsf {
      queueSize = params.queueSize
      pollInterval = '30sec'
      submitRateLimit = '100 sec'
  }
}

profiles {

    standard {
        process.cpus = params.cpus
        process.memory = params.memory
        process.disk = params.disk
        process.container = params.container
        process.maxForks = params.maxForks
        process.errorStrategy = params.errorStrategy
        process.maxRetries = params.maxRetries
        docker.enabled = true
    }

    slurm {
        process.executor = 'slurm'
        process.cpus = 1
        process.memory = "2.GB"
		process.time = "1h"
        process.container = 'docker://smshuai/cnest:dev2'
        process.errorStrategy = params.errorStrategy
        process.maxRetries = params.maxRetries
        singularity.enabled = true
		singularity.autoMounts = true
    }

    lsf {
        process.executor = 'lsf'
        process.cpus = 1
        process.memory = "2.GB"
        process.time = "1h"
        process.container = 'docker://smshuai/cnest:dev2'
        process.errorStrategy = params.errorStrategy
        process.maxRetries = params.maxRetries
        singularity.enabled = true
        singularity.autoMounts = true
        singularity.runOptions = '--contain'
    }

}

